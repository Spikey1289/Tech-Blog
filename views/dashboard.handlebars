<h2 class="is-size-3"><b>{{user.name}}'s</b> Dashboard</h2>

<h3 class="is-size-4">Blog Posts:</h3>
<div class="card p-2">
    {{#each blogPosts as |blogPost|}}
    <section class="Post mb-1 pb-1 card" data-id="{{blogPost.id}}">
        <h4 class="card-header-title Post-Title">
            {{blogPost.post_title}}
        </h4>
        <p class="card-content Post-Body">
            {{post_body}}
        </p>
        <span class="ml-2 Created-By">Created by <b>You</b></span>
    </section>
    <button class="mb-3 button is-warning EditPost">Edit</button>
    <button class="mb-3 button is-danger DeletePost">Delete</button>
    <dialog class="card Delete-Modal Modal">
        <h5 class="card-header-title has-text-danger">Are you sure you want to delete this post?</h5>
        <div class="card-content card">
            <h4 class="card-header-title Post-Title">
                {{blogPost.post_title}}
            </h4>
            <p class="card-content Post-Body">
                {{post_body}}
            </p>
        </div>
        <button class="button is-primary Delete-Post-Cancel Modal">Cancel</button>
        <button class="button is-danger Delete-Post-Confirm Modal" data-id="{{blogPost.id}}">DELETE</button>
    </dialog>
    <form class="is-hidden field Edit-Post-Form">
        <label class="label New-Title-Label">Title:</label>
        <section class="control">
            <textarea class="input New-Post-Title">{{blogPost.post_title}}</textarea>
        </section>
        <label class="label New-Body-Label">Post Content:</label>
        <section class="control">
            <textarea class="input New-Post-Body">{{post_body}}</textarea>
            <button class="mt-1 button is-warning Edit-Post-Button" type="button" data-id="{{blogPost.id}}">Submit Edit</button>
        </section>
    </form>
    {{/each}}
</div>
<h3 class="is-size-4">Comments:</h3>
<div class="card p-2">
    {{#each comments as |ParentPost|}}
    <section class="ParentPost mb-1 card has-background-info-05" data-id="{{ParentPost.id}}">
        <h4 class="card-header-title is-size-5 ParentPost-Title">
            {{ParentPost.post_title}}
        </h4>
        <span class="card-content ParentPost-Created-By">Post Created by <b>{{ParentPost.User.name}}</b></span>
            {{#each ParentPost.Comments as |Comment|}}
            <section class="DashComment card card-content ml-2 mr-2 mb-2 p-1 has-background-info-10">
                <p class="card-content DashComment-Body">
                    {{Comment.comment_body}}
                </p>
                <span class="ml-5 DashComment-Created-By">Commented by <b>You</b></span>
            </section>
            <button class="ml-3 mb-3 button is-warning EditComment">Edit</button>
            <button class="ml-3 mb-3 button is-danger DeleteComment">Delete</button>
            <dialog class="card Delete-Modal Modal">
                <h5 class="card-header-title has-text-danger">Are you sure you want to delete this Comment?</h5>
                <div class="card-content card has-background-info-05">
                    <h4 class="card-header-title ParentPost-Title">
                        {{ParentPost.post_title}}
                    </h4>
                    <span class="ml-4 ParentPost-Created-By">Post Created by <b>{{ParentPost.User.name}}</b></span>
                    <section class="card DashComment has-background-info-10">
                            <p class="card-content DashComment-Body">
                                {{Comment.comment_body}}
                            </p>
                    </section>
                </div>

                <button class="button is-primary Delete-Comment-Cancel Modal">Cancel</button>
                <button class="button is-danger Delete-Comment-Confirm Modal" data-id="{{Comment.id}}">DELETE</button>
            </dialog>
            <form class="is-hidden m-1 p-1 field Edit-Comment-Form">
                <label class="label New-Comment-Label">Comment:</label>
                <section class="control">
                    <textarea class="input New-Comment-Body">{{Comment.comment_body}}</textarea>
                    <button class="mt-1 button is-warning Edit-Comment-Button" type="button" data-id="{{Comment.id}}">Submit Comment</button>
                </section>
            </form>
            {{/each}}
    </section>
    {{/each}}
</div>

<script src="/js/dashboard.js"></script>